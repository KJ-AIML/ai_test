version: '3.8'

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
      target: develop
    ports:
      - "${SERVER_PORT:-3000}:3000"
    environment:
      - ENVIRONMENT=development
      - DEBUG=${DEBUG:-true}
      - SERVER_HOST=${SERVER_HOST:-0.0.0.0}
      - SERVER_PORT=${SERVER_PORT:-3000}
      - LOG_LEVEL=${LOG_LEVEL:-info}
      - LOG_FILE=${LOG_FILE:-src/logs/app.log}
      - OPENAI_API_KEY=${OPENAI_API_KEY:-}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY:-}
      - GOOGLE_API_KEY=${GOOGLE_API_KEY:-}
      - LANGCHAIN_API_KEY=${LANGCHAIN_API_KEY:-}
      - LANGCHAIN_TRACING_V2=${LANGCHAIN_TRACING_V2:-false}
      - LANGCHAIN_PROJECT=${LANGCHAIN_PROJECT:-ai-description-generator}
    volumes:
      - ./src:/app/src
      - ./logs:/app/src/logs
    restart: unless-stopped